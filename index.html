<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="description" content="Create Markdown documents using JavaScript and Bootstrap themes" />
  <title>山水人家非正式信息公告</title>
</head>

<body>
  <textarea>
  
</textarea>
  <script src="src/jquery.js"></script>
  <script>
    var data = $.ajax({ url: "http://shanshuirenjia.org/announcement.md", async: false }).responseText;
    document.getElementsByTagName('textarea')[0].innerHTML = data;
    console.log(data);
  </script>
  <script>
    window.onload = function () {
      //内容收展
      var screenWidth = document.getElementById('content').clientWidth;
      var maxwidth = parseInt(screenWidth / 4.1);
      var isExpand = false;
      var btnStr = '展开';
      var that = $(this);
      $('p').each(function () {
        if ($(this).text().length > maxwidth) {
          $(this).text($(this).text().substring(0, maxwidth));
          $(this).text($(this).text() + '...');
        }
      });
      // var btn = $('<div>' + btnStr + '</div>').click(function (e) {
      //   var target = $(this).prev();
      //   if (isExpand) {
      //     target.text(summary + '...');
      //     $(this).text('展开');
      //   } else {
      //     target.text(content);
      //     $(this).text('关闭');
      //   }
      //   isExpand = !isExpand;
      // }).insertAfter(that).addClass('toggle-btn');
    }
  </script>

  <script src="src/strapdown.js"></script>
</body>

</html>
